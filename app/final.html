<html>
<head><title>Final progress</title>
  <link rel="stylesheet" href="final.css">
  <style>
        .bar {
            fill: steelblue;
        }
    </style>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  
  <input type="file" name="inputfile"
            id="inputfile">
    <br>
    <pre id="output"></pre>
  
  <script type="text/javascript">
  //testing file input
  document.getElementById('inputfile')
            .addEventListener('change', function() {
              
            var fr=new FileReader();
            fr.onload=function(){
                document.getElementById('output')
                        .textContent=fr.result;
            }
              
            fr.readAsText(this.files[0]);
        })
  
  function start_app() {
    this.final.start_simulation();
    // this.voronoi.pVoronoiD();
  }

  function stop_app() {
    this.final.end_simulation();
  }

  function clear_app() {
    this.final.clear_simulation();
  }

  </script>
  
   <table>
    <tr valign=top>
        <td><b>Values at initialization:</b><br>
          Total number of pedestrians on grid: <span id="total_peds_at_start"></span><br>
          Children: <span id="num_Child_initial"></span><br>
          Adults: <span id="num_Adult_initial"></span><br>
          Adults with backpacks: <span id="num_AdultBackpack_initial"></span><br>
          Adults with bikes: <span id="num_AdultBike_initial"></span><br>
          Obstacles: <span id="num_Obstacle_initial"></span><br>
        
        </td>
        <td>
           <h2>Initialize the Simulation:</h2>

          <form>
            <label for="numChildren">Number of Children:</label><br>
            <input type="text" id="numChildren" name="numChildren"><br>
            <label for="numAdults">Number of Adults:</label><br>
            <input type="text" id="numAdults" name="numAdults"><br>
            <label for="numBackPacks">Number of Adults with Backpacks:</label><br>
            <input type="text" id="numBackPacks" name="numBackPacks"><br>
            <label for="numBikes">Number of Adults with Bikes:</label><br>
            <input type="text" id="numBikes" name="numBikes"><br>
            <label for="numExits">Number of Exits:</label><br>
            <input type="text" id="numExits" name="numExits"><br>
            <label for="numObstacles">Number of Obstacles:</label><br>
            <input type="text" id="numObstacles" name="numObstacles">
          </form>
        
        </td>
        <td>
          <h2>Board Initialization</h2>

          <form>
            <div class="slidecontainer">
              Time between updates: <input type="range" min="1" max="500" value="1" id="ms_speed"><br>
            </div>
            <label for="gridWidthi">Width of Grid:</label><br>
            <input type="text" id="gridWidthi" name="gridWidthi"><br>
            <label for="gridWidthii">Height of Grid:</label><br>
            <input type="text" id="gridWidthii" name="gridWidthii"><br>

          </form>
          </td>
          <td>
           <h2>Take Snapshots</h2>

          <b>Take Snapshot images:</b> <input type="checkbox" id="takeSnapshot"><br>

          <h2>Choose Initial Layout</h2>

	  <select name="layouts" id="LayoutSelect">

	    <option value="Randomized" selected>Randomized</option>
	    <option value="FullerLower"        >FullerLower</option>
	    <option value="Classroom"          >Classroom</option>
	    <option value="LectureHall"        >LectureHall</option>
	  </select>

          </td>
          <td>
          <h2>Choose Heuristic Function</h2>
          <b>Diagonal Distance:</b> <input type="checkbox" id="diagonal"><br>
          <b>Manhattan Distance:</b> <input type="checkbox" id="manhattan"><br>
          <b>Euclidean Distance:</b> <input type="checkbox" id="euclidean"><br>
          
          </td>
          <td>
           <h2>Choose Graphs to plot</h2>
          <b>Total collisions:</b> <input type="checkbox" id="total_collide"><br>
          <b>Average collisions:</b> <input type="checkbox" id="average_collide"><br>
          <b>Total exit times:</b> <input type="checkbox" id="total_exit"><br>
          <b>Average exit times:</b> <input type="checkbox" id="average_exit"><br>
          </td>
          
          <td>
            <label for="conflift_strategy1">Choose a first conflict strategy:</label>
            <select name="resolution-strategy" id="conflift_strategy1">
            <option value="ChooseDifferentExit">Random Exit</option>
            <option value="ChooseDifferentExitAndReset">Exit and reset wait time</option>
            <option value="ChooseRandomMove">Random move</option>
            <option value="ChooseDifferentExitDensity">Exit based on Density</option>
            <option value="NullConflictStrategy">None</option>
            </select><br>
            
            <label for="threshold1">Threshold for conflict strategy 1:</label><br>
            <input type="text" id="threshold1" name="threshold1"><br>
            
            <label for="conflift_strategy2">Choose a second conflict strategy:</label>
            <select name="resolution-strategy" id="conflift_strategy2">
            <option value="ChooseDifferentExit">Random Exit</option>
            <option value="ChooseDifferentExitAndReset">Exit and reset wait time</option>
            <option value="ChooseRandomMove">Random move</option>
            <option value="ChooseDifferentExitDensity">Exit based on Density</option>
            <option value="NullConflictStrategy">None</option>
            </select><br>
            
            <label for="threshold2">Threshold for conflict strategy 2:</label><br>
            <input type="text" id="threshold2" name="threshold2"><br>
            
            <label for="conflift_strategy3">Choose a third conflict strategy:</label>
            <select name="resolution-strategy" id="conflift_strategy3">
            <option value="ChooseDifferentExit">Random Exit</option>
            <option value="ChooseDifferentExitAndReset">Exit and reset wait time</option>
            <option value="ChooseRandomMove">Random move</option>
            <option value="ChooseDifferentExitDensity">Exit based on Density</option>
            <option value="NullConflictStrategy">None</option>
            </select><br>
            
            <label for="threshold3">Threshold for conflict strategy 3:</label><br>
            <input type="text" id="threshold3" name="threshold3"><br>
            
            <label for="conflift_strategy4">Choose a fourth conflict strategy:</label>
            <select name="resolution-strategy" id="conflift_strategy4">
            <option value="ChooseDifferentExit">Random Exit</option>
            <option value="ChooseDifferentExitAndReset">Exit and reset wait time</option>
            <option value="ChooseRandomMove">Random move</option>
            <option value="ChooseDifferentExitDensity">Exit based on Density</option>
            <option value="NullConflictStrategy">None</option>
            </select><br>
            
            <label for="threshold4">Threshold for conflict strategy 4:</label><br>
            <input type="text" id="threshold4" name="threshold4">
          </td>
    </tr>
</table>
  

  <form>
    <input type = "button" value="start" onClick="JavaScript:start_app()">
    <input type = "button" value="end" onClick="JavaScript:stop_app()">
    <input type = "button" value="clear" onClick="JavaScript:clear_app()">

  </form>


        
    <table>
      
      <tr valign=top>
        <td><canvas id="grid" width="600" height="600"></canvas></td>
        <td valign=top>
          <svg id="visualisation" width="500" height="500"></svg>
          </td>
  </tr>
  </table>
  
  <table>
      
  <tr> 
      
  <td><svg id="visualisation0" width="500" height="500"></svg></td>
  <td><svg id="visualisation1" width="600" height="500"></svg></td>
  <td><svg id="visualisation2" width="600" height="500"></svg></td>
  <td><svg id="visualisation3" width="600" height="500"></svg></td>
  </tr>
  </table>
  
  <table>
    <tr>
        <td>
          
          <h2>Statistics</h2>
          
          <b>Current number of pedestrians on grid:</b><br>
          Children: <span id="current_Child"></span><br>
          Adults: <span id="current_Adult"></span><br>
          Adults with backpacks: <span id="current_AdultBackpack"></span><br>
          Adults with bikes: <span id="current_AdultBike"></span><br>
          Total: <span id="current_total"></span><br>


          <b>Collision data:</b><br>
          Average number of collisions: <span id="avg_collide"></span><br>
          Total number of collisions: <span id="collide"></span><br>
          Average number of collisions for children: <span id="avg_Child_collide"></span><br>
          Total number of collisions for children: <span id="total_Child_collide"></span><br>
          Average number of collisions for adults: <span id="avg_Adult_collide"></span><br>
          Total number of collisions for adults: <span id="total_Adult_collide"></span><br>
          Average number of collisions for adults with backpacks: <span id="avg_AdultBackpack_collide"></span><br>
          Total number of collisions for adults with backpacks: <span id="total_AdultBackpack_collide"></span><br>
          Average number of collisions for adults with bikes: <span id="avg_AdultBike_collide"></span><br>
          Total number of collisions for adults with bikes: <span id="total_AdultBike_collide"></span><br>

          <b>Exit time data</b><br>
          Average exit time: <span id="avg_exit_time"></span><br>
          Total exit time: <span id="total_exit_time"></span><br>
          Average exit time for children: <span id="avg_exit_Child"></span><br>
          Total exit time for children: <span id="total_Child_exit"></span><br>
          Average exit time for adults: <span id="avg_exit_Adult"></span><br>
          Total exit time for adults: <span id="total_Adult_exit"></span><br>
          Average exit time for adults with backpacks: <span id="avg_exit_AdultBackpack"></span><br>
          Total exit time for adults with backpacks: <span id="total_AdultBackpack_exit"></span><br>
          Average exit time for adults with bikes: <span id="avg_exit_AdultBike"></span><br>
          Total exit time for adults with bikes: <span id="total_AdultBike_exit"></span><br>

          <b>Waiting time data</b><br>
          Average waiting time: <span id="avg_wait_steps"></span><br>
          Total waiting time: <span id="total_wait_steps"></span><br>
          Average waiting time for children: <span id="avg_wait_steps_Child"></span><br>
          Total waiting time for children: <span id="total_Child_wait"></span><br>
          Average waiting time for adults: <span id="avg_wait_steps_Adult"></span><br>
          Total waiting time for adults: <span id="total_Adult_wait"></span><br>
          Average waiting time for adults with backpacks: <span id="avg_wait_steps_AdultBackpack"></span><br>
          Total waiting time for adults with backpacks: <span id="total_AdultBackpack_wait"></span><br>
          Average waiting time for adults with bikes: <span id="avg_wait_steps_AdultBike"></span><br>
          Total waiting time for adults with bikes: <span id="total_AdultBike_wait"></span><br>

          Minimum time possible with no obstacles: 

        </td>
      </tr>
    </table>

<!--     <h1>Sample outputs</h1>
 -->

    <script type='text/javascript' src='data.js'>    </script>
    <script type='text/javascript' src='metrics.js'>    </script>
    <script type='text/javascript' src='gui.js'>    </script>
    <script type='text/javascript' src='heap.js'>    </script>
    <script type='text/javascript' src='astar.js'>    </script>
    <script type='text/javascript' src='pop.js'>    </script>
    <script type='text/javascript' src='layout.js'>  </script>
    <script type='text/javascript' src='conflict.js'>    </script>
    <script type='text/javascript' src='final.js'>    </script>
    <script type="text/javascript" src="LZWEncoder.js">    </script>
    <script type="text/javascript" src="NeuQuant.js">    </script>
    <script type="text/javascript" src="GIFEncoder.js">    </script>
    <script type="text/javascript" src="b64.js">    </script>
    <script type="text/javascript" src="graph.js">    </script>
    <script type="text/javascript" src="voronoi.js">    </script>



  </body>
  </html>
